ERROR: comments.test: compile: <?php #function test() { print "ok"; } test(); ?> - arguments: ((SyntaxError "Invalid token: " #\#))
ERROR: comments.test: compile: <?php //function test() { return 5; } $a = test(); print $a; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: divide source: #f value: "/">))
PASS: comments.test: compile: <?php /* some comment */ ?>
PASS: comments.test: compile: <?
#this #is a # comment # nested #shouldn't matter
?>
PASS: comments.test: compile: <%
//this is a comment ?>
%>
PASS: comments.test: compile: <script language="php">
/* multi-line comment on a single line*/
</script>
ERROR: comments.test: compile: <?
/*

multi-line 
comment 
on
#test
multiple
//what?
lines

*/ - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: divide source: #f value: "/">))
PASS: comments.test: compile: <?php
#comment
//comment
/*comment*/
PASS: comparisons.test: compile: <?php if(1 == 1) print 1; else print 2; ?>
PASS: comparisons.test: compile: <?php if(1 === 1) print 1; else print 2; ?>
PASS: comparisons.test: compile: <?php if("1" == 1) print 1; else print 2; ?>
PASS: comparisons.test: compile: <?php if("1" === 1) print 1; else print 2; ?>
ERROR: comparisons.test: compile: <?php if(true) print 1; else print 2; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: close-paren source: #f value: ")">))
ERROR: comparisons.test: compile: <?php if(false) print 1; else print 2; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: close-paren source: #f value: ")">))
ERROR: comparisons.test: compile: <?php if(TRUE) print 1; else print 2; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: close-paren source: #f value: ")">))
ERROR: comparisons.test: compile: <?php if(FALSE) print 1; else print 2; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: close-paren source: #f value: ")">))
ERROR: comparisons.test: compile: <?php if(null) print 1; else print 2; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: close-paren source: #f value: ")">))
ERROR: comparisons.test: compile: <?php if(NULL) print 1; else print 2; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: close-paren source: #f value: ")">))
ERROR: comparisons.test: compile: <?php if(1) print 1; else print 2; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: close-paren source: #f value: ")">))
ERROR: comparisons.test: compile: <?php if(0) print 1; else print 2; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: close-paren source: #f value: ")">))
ERROR: comparisons.test: compile: <?php if("a") print 1; else print 2; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: close-paren source: #f value: ")">))
PASS: comparisons.test: compile: <?php if(1 !== 1) print 1; else print 2; ?>
PASS: comparisons.test: compile: <?php if(1 != 1) print 1; else print 2; ?>
PASS: echo.test: compile: <?php echo ""; ?>
PASS: echo.test: compile: <?php echo null; ?>
ERROR: echo.test: compile: <?php echo 'aaaaaa123XXXXXXXX_()*)$#)*$#*))$*#$)#*'; ?> - arguments: ((SyntaxError "Invalid token: " #\'))
PASS: echo.test: compile: <?php echo 5; ?>
PASS: echo.test: compile: <?php echo "some string"; echo "another string"; ?>
PASS: echo.test: compile: <?php $a = 1; echo $a; ?>
ERROR: echo.test: compile: <?php $a = 2; echo "$a"; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: T_ENCAPSED_AND_WHITESPACE source: #f value: "\"$a\"">))
PASS: echo.test: compile: <?php function test() { return 12; } echo test(); ?>
PASS: echo.test: compile: <?php $a = 3; echo ++$a; ?>
PASS: echo.test: compile: <?php $a = 4; echo --$a; ?>
ERROR: echo.test: compile: <?php $a = 1; $b = 2; $c = 3; echo $a, $b, $c; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: comma source: #f value: ",">))
ERROR: echo.test: compile: <? echo "a", "b", 1, 2; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: comma source: #f value: ",">))
PASS: functions.test: compile: <?php function test() { print "ok"; } test(); ?>
PASS: functions.test: compile: <?php function test() { return 5; } $a = test(); print $a; ?>
PASS: functions.test: compile: <?php function a12_21aa_45(){ print 1;} a12_21aa_45(); ?>
ERROR: functions.test: compile: <? function a(){} ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: close-brace source: #f value: "}">))
PASS: functions.test: compile: <?php function _aFunc() { print "sure"; } _aFunc(); ?>
PASS: functions.test: compile: <?php
function test1($a, $b, $c)
{
  if($a == $b)
    return $c;
  else
    return $b;
}

$a = test1(1, 1, 2);
$b = test1(1, 2, 1);

print $a;
print $b;
?>
PASS: functions.test: compile: <?php
function test_some_func() {
  print "yar";
}

test_some_func();
PASS: functions.test: compile: <?php
function a() { return 1; }
function b() { return 2; }
function c() { return 3; }

function test($a, $b, $c) {
  print $c;print $b; print $a;
}

test(a(), b(), c());
?>
ERROR: functions.test: compile: <script language="php">
notyetdefined();

function notyetdefined() { print "works"; }
?> - arguments: ((unbound-variable "module-lookup" "Unbound variable: ~S" (notyetdefined) #f))
PASS: helloworld.test: parser: hello world
PASS: helloworld.test: parser: <?php print "hello world"; ?>
PASS: helloworld.test: compile: hello world
PASS: helloworld.test: compile: <?php print "hello world"; ?>
PASS: helloworld.test: compile: hello <?php print "world"; ?>
PASS: helloworld.test: compile: <?php print "hello "; ?>world
PASS: helloworld.test: compile: hello<?php ?> world
PASS: helloworld.test: compile: <?php return "hello world"; ?>
PASS: ifs.test: compile: <?php if(1 == 1) { print "1"; } else { print "2"; } ?>
PASS: ifs.test: compile: <? if(2 == 1) { print "1"; } else { print "2"; } ?>
PASS: ifs.test: compile: <?php if(((((((((((1 == 1))))))))))) { print "aeiou?"; } ?>
PASS: ifs.test: compile: <?php

if("a" == "a")
  print "a";
else
  print "b";

?>
PASS: ifs.test: compile: <?php

$a = 1;
$b = 2;
$c = 3;
$d = 1;

if($a == $b) {
  print $a;
} elseif($a == $c) {
  print $c;
} elseif($a == $d) {
  print $d;
} else {
  print "hrm...";
}

?>
PASS: ifs.test: compile: <?php

$a = 1;
$b = 2;
$c = 3;
$d = 1;

if($a == $b)
  print $a;
elseif ($b == $c)
  print $b;
elseif ($c == $a)
  print $c;
elseif ($a == $d)
  print "good";

?>
PASS: ifs.test: compile: <?php

if(1 == 2)
{
	$a = 1;
	$b = 2;
	print $a;print $b;
} else if (2 == 1) { 
  print "weird";
} else if (3 == 7)
  print 666;
else
  print "passed";

?>
PASS: ifs.test: compile: <?php if(1 == 2) { ?> "a" <?php } else { ?> "b" <?php } ?>
PASS: ifs.test: compile: <? if("aaa" === "aaa") { print "a"; } else { print "b"; } ?>
PASS: ifs.test: compile: <?php if("1" == 1) print "ok"; else print "wrong"; ?>
PASS: ifs.test: compile: <?php if(1 === "1") print "wrong"; else print "true"; ?>
PASS: ifs.test: compile: <?php if(1 === 1) print "right"; else print "wrong"; ?>
PASS: nums.test: compile: <? $n = 1; print $n; ?>
PASS: nums.test: compile: <? $n = 11; print $n; ?>
ERROR: nums.test: compile: <? $n = -1; print $n; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: minus source: #f value: "-">))
ERROR: nums.test: compile: <? $n = -1111111; print $n; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: minus source: #f value: "-">))
PASS: nums.test: compile: <? $n = 12345678901234567890; print $n; ?>
ERROR: nums.test: compile: <? $n = -12345678901234567890; print $n; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: minus source: #f value: "-">))
ERROR: nums.test: compile: <?php $n = 0; ++$n; --$n; print $n; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: semi source: #f value: ";">))
PASS: print.test: compile: <?php print ""; ?>
PASS: print.test: compile: <?php print null; ?>
PASS: print.test: compile: <?php print 5; ?>
PASS: print.test: compile: <?php print "some string"; print "another string"; ?>
PASS: print.test: compile: <?php $a = 1; print $a; ?>
ERROR: print.test: compile: <?php $a = 2; print "$a"; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: T_ENCAPSED_AND_WHITESPACE source: #f value: "\"$a\"">))
PASS: print.test: compile: <?php function test() { return 12; } print test(); ?>
PASS: print.test: compile: <?php $a = 3; print ++$a; ?>
PASS: print.test: compile: <?php $a = 4; print --$a; ?>
PASS: strings.test: compile: <? $s = "string"; print $s; ?>
ERROR: strings.test: compile: <? $s = 'string'; print $s; ?> - arguments: ((SyntaxError "Invalid token: " #\'))
PASS: strings.test: compile: <? $s = "this 
is 
a 
string"; print $s;
ERROR: strings.test: compile: <?php $s = 'this 
is 
a 
string'; print $s - arguments: ((SyntaxError "Invalid token: " #\'))
FAIL: strings.test: compile: <?php $a = 5; print "a = $a"; ?>
ERROR: strings.test: compile: <?php $a = 5; print 'a = $a'; ?> - arguments: ((SyntaxError "Invalid token: " #\'))
FAIL: strings.test: compile: <?php $a = "test"; print "a = $a"; ?>
ERROR: strings.test: compile: <?php $a = 'test'; print "a = $a"; ?> - arguments: ((SyntaxError "Invalid token: " #\'))
ERROR: strings.test: compile: <?php $a = "test"; print 'a = $a'; ?> - arguments: ((SyntaxError "Invalid token: " #\'))
ERROR: strings.test: compile: <?php $a = 'test'; print 'a = $a'; ?> - arguments: ((SyntaxError "Invalid token: " #\'))
PASS: vars.test: compile: <? $a = 1; print $a; ?>
PASS: vars.test: compile: <?php $a = "a"; print $a; ?>
ERROR: vars.test: compile: <?php $a = 'b'; print $a; ?> - arguments: ((SyntaxError "Invalid token: " #\'))
PASS: vars.test: compile: <?php $x = 1; $y = $x; print $x; ?>
PASS: vars.test: compile: <? $x = 2; $x = 1; $x = 3; print $x; ?>
ERROR: vars.test: compile: <? $x = "ok"; $gggg = "$x"; print $gggg; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: T_ENCAPSED_AND_WHITESPACE source: #f value: "\"$x\"">))
ERROR: vars.test: compile: <? $var = "val"; $varb = '$var'; print $varb; ?> - arguments: ((SyntaxError "Invalid token: " #\'))
ERROR: vars.test: compile: <?php $a1 = 1; print $a1; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: T_LNUMBER source: #f value: "1">))
ERROR: vars.test: compile: <?php $_a = 2; print $_a; ?> - arguments: ((SyntaxError "Invalid token: " #\$))
ERROR: vars.test: compile: <? $_a1_2b = 3; print $_a1_2b; ?> - arguments: ((SyntaxError "Invalid token: " #\$))
PASS: vars.test: compile: <? $x = 1; $y = ++$x; print $x; ?>
ERROR: vars.test: compile: <? $t = true; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: semi source: #f value: ";">))
ERROR: vars.test: compile: <? $f = false; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: semi source: #f value: ";">))
ERROR: vars.test: compile: <? $T = TRUE; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: semi source: #f value: ";">))
ERROR: vars.test: compile: <? $F = FALSE; ?> - arguments: ((ParseSyntaxError "Syntax error: unexpected token : " #<lexical-token category: semi source: #f value: ";">))
PASS: vars.test: compile: <?php $N = NULL; ?>
PASS: vars.test: compile: <? $n = null; ?>

Totals for this test run:
passes:                 66
failures:               2
unexpected passes:      0
expected failures:      0
unresolved test cases:  0
untested test cases:    0
unsupported test cases: 0
errors:                 39

